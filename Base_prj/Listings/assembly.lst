


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             text, CODE, READONLY
    2 00000000                 EXPORT           Kalmanfilter_asm
    3 00000000         Kalmanfilter_asm
    4 00000000 B4F0            PUSH             {R4-R7}     ;INITIALIZE THE LOO
                                                            P
    5 00000002 ECB2 0A01       VLDR.F32         S0, [R2], #0x04 ; float q
    6 00000006 ECF2 0A01       VLDR.F32         S1, [R2], #0x04 ; float r
    7 0000000A ECB2 1A01       VLDR.F32         S2, [R2], #0x04 ; float x
    8 0000000E ECF2 1A01       VLDR.F32         S3, [R2], #0x04 ; float p
    9 00000012 ED92 2A00       VLDR.F32         S4, [R2]    ; float k
   10 00000016         ; state data transfer complete
   11 00000016 681B            LDR              R3, [R3]    ; load value contai
                                                            ned in length into 
                                                            R3
   12 00000018 F04F 0400       MOV              R4, #0      ; loop tracker 
   13 0000001C ED9F 3A0D       VLDR.F32         S6, =0.0    ; initial value for
                                                             output[i]
   14 00000020         loop                                 ; loop definition
   15 00000020 429C            CMP              R4, R3
   16 00000022 DA14            BGE              endfor      ; exit if condition
                                                             not met
   17 00000024 EE71 1A80       VADD.F32         S3, S3, S0  ; p = p + q
   18 00000028 EE31 4AA0       VADD.F32         S8, S3, S1  ; p + r
   19 0000002C EE81 2A84       VDIV.F32         S4, S3, S8  ; k = p / p + r
   20 00000030 ECF0 2A01       VLDR.F32         S5, [R0], #0x04 ; x_obs[i] = in
                                                            put_array[i]
   21 00000034 EE72 3AC3       VSUB.F32         S7, S5, S6  ; x_obs - x_pred[n-
                                                            1] 
   22 00000038 EEA2 3A23       VFMA.F32         S6, S4, S7  ; x_pre[n] = x[n-1]
                                                             + k*(message - x) 
                                                               
   23 0000003C EE42 1A61       VMLS.f32         S3, S4, S3  ; p = (1-k)*p
   24 00000040         ;take care of variables for next iteration
   25 00000040 ED81 3A00       VSTR.F32         S6, [R1]    ; store into output
                                                             array 
   26 00000044 F101 0104       ADD              R1, #0x04   ; increment output 
                                                            array index
   27 00000048 F104 0401       ADD              R4, R4, #1  ; increment loop in
                                                            dex 
   28 0000004C E7E8            B                loop        ; branch back to lo
                                                            op
   29 0000004E         endfor
   30 0000004E BCF0            POP              {R4-R7}
   31 00000050 4770            BX               LR
   32 00000052                 END
              00 00 00000000 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\assembly.d -o.\objects\assembly.o -IC:\Users\dsharm10
\426\426-microprcessors\Base_prj\RTE -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\4.5.0\CMSI
S\Include -IC:\Keil_v5\ARM\PACK\Keil\STM32F4xx_DFP\2.7.0\Drivers\CMSIS\Device\S
T\STM32F4xx\Include --predefine="__UVISION_VERSION SETA 515" --predefine="_RTE_
 SETA 1" --predefine="STM32F407xx SETA 1" --list=.\listings\assembly.lst Source
s\Assembly.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Kalmanfilter_asm 00000000

Symbol: Kalmanfilter_asm
   Definitions
      At line 3 in file Sources\Assembly.s
   Uses
      At line 2 in file Sources\Assembly.s
Comment: Kalmanfilter_asm used once
endfor 0000004E

Symbol: endfor
   Definitions
      At line 29 in file Sources\Assembly.s
   Uses
      At line 16 in file Sources\Assembly.s
Comment: endfor used once
loop 00000020

Symbol: loop
   Definitions
      At line 14 in file Sources\Assembly.s
   Uses
      At line 28 in file Sources\Assembly.s
Comment: loop used once
text 00000000

Symbol: text
   Definitions
      At line 1 in file Sources\Assembly.s
   Uses
      None
Comment: text unused
4 symbols
340 symbols in table
